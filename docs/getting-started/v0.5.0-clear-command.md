# v0.5.0 - Clear Command

**ðŸŽ¯ Goal:** Remove all tasks at once

**ðŸ“¦ Implementation:**

```rust
"clear" => {
    if fs::metadata("todos.txt").is_ok() {
        fs::remove_file("todos.txt")?;
        println!("âœ“ All tasks have been removed");
    } else {
        println!("No tasks to remove");
    }
}
```

**ðŸ§  Key Concepts:**

### `fs::metadata()` for file existence check

```rust
if fs::metadata("todos.txt").is_ok() {
    // File exists
} else {
    // File doesn't exist
}
```

**Why not just try to delete?**

```rust
// Without check
fs::remove_file("todos.txt")?;  
// If file doesn't exist â†’ Error propagated to user
// User sees: "Error: No such file or directory" âŒ
```

**With check:**

```rust
// With check
if fs::metadata("todos.txt").is_ok() {
    fs::remove_file("todos.txt")?;
    println!("âœ“ All tasks have been removed");
} else {
    println!("No tasks to remove");  // âœ… Friendly message
}
```

**User experience:**

```bash
# First time - file exists
$ todo clear
âœ“ All tasks have been removed

# Second time - already cleared
$ todo clear
No tasks to remove  # Not an error!
```

### Why `.is_ok()` instead of `.unwrap()`?

```rust
fs::metadata("todos.txt").is_ok()  // Returns bool: true or false
```

**We don't care about the metadata**, only if the file exists.

**Alternatives:**

```rust
// âŒ Overkill
let metadata = fs::metadata("todos.txt")?;
// Why get metadata if we're just going to delete it?

// âœ… Simple
fs::metadata("todos.txt").is_ok()
```

### `fs::remove_file()` behavior

```rust
fs::remove_file("todos.txt")?;
```

**What it does:**

- Deletes the file from filesystem
- **Permanent** - no undo!
- Returns `Result` - can fail if no permissions

**Different from clearing contents:**

```rust
// This would clear contents but keep file
fs::write("todos.txt", "")?;

// This deletes the file entirely
fs::remove_file("todos.txt")?;
```

**Why delete instead of clear?**

- Cleaner - file truly gone
- `list` command already handles missing file
- Consistent with "no tasks" state

### Idempotent operations

**What's idempotency?**
> An operation that can be called multiple times with the same result

**clear is idempotent:**

```bash
todo clear  # Deletes file
todo clear  # No file to delete, but still succeeds
todo clear  # Still succeeds
```

**Why this matters:**

- âœ… No confusing errors
- âœ… Scripts can call it safely
- âœ… User doesn't have to check first

**ðŸ”— Resources:**

- [Code v0.5.0](https://github.com/joaofelipegalvao/todo-cli/tree/v0.5.0)
- [Full diff](https://github.com/joaofelipegalvao/todo-cli/compare/v0.4.2...v0.5.0)