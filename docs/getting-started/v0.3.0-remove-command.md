# v0.3.0 - Remove Command

**ðŸŽ¯ Goal:** Delete specific tasks

**ðŸ“¦ Implementation:**

```rust
"remove" => {
    if args.len() < 3 {
        return Err("Usage: todo remove <number>".into());
    }
    
    let number: usize = args[2].parse()?;
    let content = fs::read_to_string("todos.txt")?;
    let mut lines: Vec<String> = content.lines().map(|l| l.to_string()).collect();
    
    if number == 0 || number > lines.len() {
        return Err("Invalid task number".into());
    }
    
    let index = number - 1;
    lines.remove(index);
    
    fs::write("todos.txt", lines.join("\n") + "\n")?;
    println!("âœ“ Task removed");
}
```

**ðŸ§  Key Concepts:**

### Index validation

```rust
if number == 0 || number > lines.len() {
    return Err("Invalid task number".into());
}
```

**Why this validation is critical:**

**Case 1: Zero index**

```rust
// User types: todo remove 0
number == 0  // Invalid! Users see tasks numbered 1, 2, 3...
```

**Case 2: Out of bounds**

```rust
// File has 5 tasks, user types: todo remove 10
number > lines.len()  // Would panic at lines.remove(9)
```

**Without validation:**

```rust
lines.remove(9)  // panics: "index out of bounds"
// User sees: "thread 'main' panicked at..." âŒ Bad UX
```

**With validation:**

```rust
return Err("Invalid task number".into());
// User sees: "Error: Invalid task number" âœ… Clear message
```

### `Vec::remove()` method

```rust
lines.remove(index);
```

**What it does:**

- Removes element at index `index`
- Shifts all following elements left
- Reduces Vec length by 1

**Example:**

```rust
let mut tasks = vec!["Task 1", "Task 2", "Task 3", "Task 4"];
tasks.remove(1);  // Remove "Task 2"
// Result: ["Task 1", "Task 3", "Task 4"]
//                     â†‘ shifted left
```

**Performance note:**

- O(n) operation - must shift all elements after removed index
- For small lists (hundreds of tasks), this is fine
- For large lists (thousands), might need different data structure

### Comparison: `remove()` vs `replace()`

```rust
// done command (v0.2.0) - modifies content
lines[index] = lines[index].replace("[ ]", "[x]");

// remove command (v0.3.0) - deletes entire element
lines.remove(index);
```

**Key difference:**

- `replace()` - task still exists, just changed
- `remove()` - task is gone, indices shift

**This affects user experience:**

```
Before remove(1):        After remove(1):
1. Task A                1. Task B  â† was 2, now 1
2. Task B                2. Task C  â† was 3, now 2
3. Task C
```

Users need to `list` again to see new numbers.

### Validation added to `done` command

**Notice the improvement in v0.3.0:**

```rust
"done" => {
    // ... parsing ...
    
    // âœ… NEW: Validation added!
    if number == 0 || number > lines.len() {
        return Err("Invalid task number".into());
    }
    
    let index = number - 1;
    lines[index] = lines[index].replace("[ ]", "[x]");
    // ...
}
```

**Before v0.3.0:** `done` command could panic on invalid index  
**After v0.3.0:** Both `done` and `remove` have proper validation

**This is iterative improvement** - recognizing a pattern (validation) and applying it consistently.

**ðŸ”— Resources:**

- [Code v0.3.0](https://github.com/joaofelipegalvao/todo-cli/tree/v0.3.0)
- [Full diff](https://github.com/joaofelipegalvao/todo-cli/compare/v0.2.0...v0.3.0)